openapi: 3.0.3
info:
  title: Interview Organiser API
  description: Complete REST API for managing interview processes
  version: 1.0.0
  contact:
    name: API Support

servers:
  - url: http://localhost:8080/api/v1
    description: Local Development

security:
  - bearerAuth: []

tags:
  - name: Health
    description: Health check
  - name: Authentication
    description: User authentication
  - name: Users
    description: User management
  - name: Recruiters
    description: Recruiter management
  - name: Candidates
    description: Candidate management
  - name: Interviewers
    description: Interviewer management
  - name: Interviews
    description: Interview scheduling
  - name: Feedback
    description: Interview feedback
  - name: Dashboards
    description: Role-specific dashboards

paths:
  /health:
    get:
      tags: [Health]
      summary: Check API health
      security: []
      responses:
        '200':
          description: API is healthy
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthResponse'

  /auth/register:
    post:
      tags: [Authentication]
      summary: Register new user
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
      responses:
        '201':
          description: User registered
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '400':
          description: Invalid input
        '409':
          description: Email already exists

  /auth/login:
    post:
      tags: [Authentication]
      summary: User login
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'
        '401':
          description: Invalid credentials

  /auth/refresh:
    post:
      tags: [Authentication]
      summary: Refresh access token
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshTokenRequest'
      responses:
        '200':
          description: Token refreshed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthResponse'

  /auth/logout:
    post:
      tags: [Authentication]
      summary: User logout
      responses:
        '200':
          description: Logout successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageResponse'

  /users:
    get:
      tags: [Users]
      summary: Get all users
      parameters:
        - name: role
          in: query
          schema:
            $ref: '#/components/schemas/UserRole'
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: List of users
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserPageResponse'

  /users/{userId}:
    get:
      tags: [Users]
      summary: Get user by ID
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: User found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'
        '404':
          description: User not found

    put:
      tags: [Users]
      summary: Update user
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserRequest'
      responses:
        '200':
          description: User updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserResponse'

    delete:
      tags: [Users]
      summary: Delete user
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: User deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageResponse'

  /recruiters:
    get:
      tags: [Recruiters]
      summary: Get all recruiters
      parameters:
        - name: status
          in: query
          schema:
            $ref: '#/components/schemas/VerificationStatus'
        - name: isActive
          in: query
          schema:
            type: boolean
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: List of recruiters
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecruiterPageResponse'

    post:
      tags: [Recruiters]
      summary: Create recruiter
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateRecruiterRequest'
      responses:
        '201':
          description: Recruiter created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecruiterResponse'

  /recruiters/{recruiterId}:
    get:
      tags: [Recruiters]
      summary: Get recruiter by ID
      parameters:
        - name: recruiterId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Recruiter found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecruiterResponse'

    put:
      tags: [Recruiters]
      summary: Update recruiter
      parameters:
        - name: recruiterId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateRecruiterRequest'
      responses:
        '200':
          description: Recruiter updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecruiterResponse'

    delete:
      tags: [Recruiters]
      summary: Delete recruiter
      parameters:
        - name: recruiterId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Recruiter deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageResponse'

  /recruiters/{recruiterId}/verify:
    put:
      tags: [Recruiters]
      summary: Verify recruiter (Admin)
      parameters:
        - name: recruiterId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Recruiter verified
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecruiterResponse'

  /recruiters/{recruiterId}/unverify:
    put:
      tags: [Recruiters]
      summary: Unverify recruiter (Admin)
      parameters:
        - name: recruiterId
          in: path
          required: true
          schema:
            type: string
        - name: reason
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Recruiter unverified
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecruiterResponse'

  /recruiters/{recruiterId}/reject:
    put:
      tags: [Recruiters]
      summary: Reject recruiter (Admin)
      parameters:
        - name: recruiterId
          in: path
          required: true
          schema:
            type: string
        - name: reason
          in: query
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Recruiter rejected
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecruiterResponse'

  /candidates:
    get:
      tags: [Candidates]
      summary: Get all candidates
      parameters:
        - name: status
          in: query
          schema:
            $ref: '#/components/schemas/CandidateStatus'
        - name: search
          in: query
          schema:
            type: string
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: List of candidates
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CandidatePageResponse'

    post:
      tags: [Candidates]
      summary: Create candidate
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCandidateRequest'
      responses:
        '201':
          description: Candidate created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CandidateResponse'

  /candidates/{candidateId}:
    get:
      tags: [Candidates]
      summary: Get candidate by ID
      parameters:
        - name: candidateId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Candidate found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CandidateResponse'

    put:
      tags: [Candidates]
      summary: Update candidate
      parameters:
        - name: candidateId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCandidateRequest'
      responses:
        '200':
          description: Candidate updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CandidateResponse'

    delete:
      tags: [Candidates]
      summary: Delete candidate
      parameters:
        - name: candidateId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Candidate deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageResponse'

  /candidates/invite:
    post:
      tags: [Candidates]
      summary: Invite candidate
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InviteCandidateRequest'
      responses:
        '200':
          description: Invitation sent
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageResponse'

  /candidates/invitation/respond:
    post:
      tags: [Candidates]
      summary: Respond to invitation
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RespondToInvitationRequest'
      responses:
        '200':
          description: Response recorded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageResponse'

  /interviewers:
    get:
      tags: [Interviewers]
      summary: Get all interviewers
      parameters:
        - name: expertise
          in: query
          schema:
            type: string
        - name: available
          in: query
          schema:
            type: boolean
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: List of interviewers
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InterviewerPageResponse'

    post:
      tags: [Interviewers]
      summary: Create interviewer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateInterviewerRequest'
      responses:
        '201':
          description: Interviewer created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InterviewerResponse'

  /interviewers/invite:
    post:
      tags: [Interviewers]
      summary: Invite interviewer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InviteInterviewerRequest'
      responses:
        '200':
          description: Invitation sent
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageResponse'

  /interviewers/{interviewerId}:
    get:
      tags: [Interviewers]
      summary: Get interviewer by ID
      parameters:
        - name: interviewerId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Interviewer found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InterviewerResponse'

    put:
      tags: [Interviewers]
      summary: Update interviewer
      parameters:
        - name: interviewerId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateInterviewerRequest'
      responses:
        '200':
          description: Interviewer updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InterviewerResponse'

    delete:
      tags: [Interviewers]
      summary: Delete interviewer
      parameters:
        - name: interviewerId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Interviewer deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageResponse'

  /interviews:
    get:
      tags: [Interviews]
      summary: Get all interviews
      parameters:
        - name: status
          in: query
          schema:
            $ref: '#/components/schemas/InterviewStatus'
        - name: candidateId
          in: query
          schema:
            type: string
        - name: interviewerId
          in: query
          schema:
            type: string
        - name: fromDate
          in: query
          schema:
            type: string
            format: date-time
        - name: toDate
          in: query
          schema:
            type: string
            format: date-time
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: List of interviews
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InterviewPageResponse'

    post:
      tags: [Interviews]
      summary: Schedule interview
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ScheduleInterviewRequest'
      responses:
        '201':
          description: Interview scheduled
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InterviewResponse'

  /interviews/{interviewId}:
    get:
      tags: [Interviews]
      summary: Get interview by ID
      parameters:
        - name: interviewId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Interview found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InterviewResponse'

    put:
      tags: [Interviews]
      summary: Update interview
      parameters:
        - name: interviewId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateInterviewRequest'
      responses:
        '200':
          description: Interview updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InterviewResponse'

    delete:
      tags: [Interviews]
      summary: Cancel interview
      parameters:
        - name: interviewId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Interview cancelled
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageResponse'

  /interviews/{interviewId}/status:
    patch:
      tags: [Interviews]
      summary: Update interview status
      parameters:
        - name: interviewId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateInterviewStatusRequest'
      responses:
        '200':
          description: Status updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InterviewResponse'

  /interviews/{interviewId}/confirm:
    post:
      tags: [Interviews]
      summary: Confirm interview (Candidate)
      parameters:
        - name: interviewId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ConfirmInterviewRequest'
      responses:
        '200':
          description: Interview confirmed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InterviewResponse'

  /interviews/{interviewId}/result:
    post:
      tags: [Interviews]
      summary: Mark interview result
      parameters:
        - name: interviewId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MarkInterviewResultRequest'
      responses:
        '200':
          description: Result marked
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InterviewResponse'

  /interviews/{interviewId}/next-round:
    post:
      tags: [Interviews]
      summary: Create next round interview
      parameters:
        - name: interviewId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateNextRoundInterviewRequest'
      responses:
        '201':
          description: Next round created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InterviewResponse'

  /interviews/{interviewId}/request-feedback:
    post:
      tags: [Interviews]
      summary: Request feedback
      parameters:
        - name: interviewId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Feedback requested
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageResponse'

  /feedback:
    get:
      tags: [Feedback]
      summary: Get all feedback
      parameters:
        - name: interviewId
          in: query
          schema:
            type: string
        - name: candidateId
          in: query
          schema:
            type: string
        - name: interviewerId
          in: query
          schema:
            type: string
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/SizeParam'
      responses:
        '200':
          description: List of feedback
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FeedbackPageResponse'

    post:
      tags: [Feedback]
      summary: Submit feedback
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubmitFeedbackRequest'
      responses:
        '201':
          description: Feedback submitted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FeedbackResponse'

  /feedback/{feedbackId}:
    get:
      tags: [Feedback]
      summary: Get feedback by ID
      parameters:
        - name: feedbackId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Feedback found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FeedbackResponse'

    put:
      tags: [Feedback]
      summary: Update feedback
      parameters:
        - name: feedbackId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateFeedbackRequest'
      responses:
        '200':
          description: Feedback updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FeedbackResponse'

    delete:
      tags: [Feedback]
      summary: Delete feedback
      parameters:
        - name: feedbackId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Feedback deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MessageResponse'

  /dashboard/admin:
    get:
      tags: [Dashboards]
      summary: Get admin dashboard
      responses:
        '200':
          description: Admin dashboard data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AdminDashboardResponse'

  /dashboard/recruiter/{recruiterId}:
    get:
      tags: [Dashboards]
      summary: Get recruiter dashboard
      parameters:
        - name: recruiterId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Recruiter dashboard data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RecruiterDashboardResponse'

  /dashboard/interviewer/{interviewerId}:
    get:
      tags: [Dashboards]
      summary: Get interviewer dashboard
      parameters:
        - name: interviewerId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Interviewer dashboard data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InterviewerDashboardResponse'

  /dashboard/candidate/{candidateId}:
    get:
      tags: [Dashboards]
      summary: Get candidate dashboard
      parameters:
        - name: candidateId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Candidate dashboard data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CandidateDashboardResponse'

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  parameters:
    PageParam:
      name: page
      in: query
      schema:
        type: integer
        default: 0
        minimum: 0
    SizeParam:
      name: size
      in: query
      schema:
        type: integer
        default: 10
        minimum: 1
        maximum: 100

  schemas:
    # Enums
    UserRole:
      type: string
      enum: [ADMIN, RECRUITER, INTERVIEWER, CANDIDATE]

    VerificationStatus:
      type: string
      enum: [PENDING, VERIFIED, REJECTED]

    CandidateStatus:
      type: string
      enum: [APPLIED, SCREENING, INTERVIEW_SCHEDULED, INTERVIEWED, SELECTED, REJECTED]

    InterviewStatus:
      type: string
      enum: [SCHEDULED, IN_PROGRESS, COMPLETED, CANCELLED, RESCHEDULED]

    InterviewType:
      type: string
      enum: [TECHNICAL, HR, CULTURAL_FIT, MANAGERIAL]

    InterviewResult:
      type: string
      enum: [SELECTED, REJECTED, NEXT_ROUND]

    FeedbackRecommendation:
      type: string
      enum: [STRONG_HIRE, HIRE, HOLD, NO_HIRE]

    # Common
    MessageResponse:
      type: object
      properties:
        message:
          type: string
        timestamp:
          type: string
          format: date-time

    HealthResponse:
      type: object
      properties:
        status:
          type: string
        timestamp:
          type: string
          format: date-time
        message:
          type: string

    PageResponse:
      type: object
      properties:
        content:
          type: array
          items:
            type: object
        page:
          type: integer
        size:
          type: integer
        totalElements:
          type: integer
        totalPages:
          type: integer

    # Auth
    RegisterRequest:
      type: object
      required: [email, password, firstName, lastName, role]
      properties:
        email:
          type: string
          format: email
        password:
          type: string
          minLength: 8
        firstName:
          type: string
        lastName:
          type: string
        phone:
          type: string
        role:
          $ref: '#/components/schemas/UserRole'

    LoginRequest:
      type: object
      required: [email, password]
      properties:
        email:
          type: string
        password:
          type: string

    RefreshTokenRequest:
      type: object
      required: [refreshToken]
      properties:
        refreshToken:
          type: string

    AuthResponse:
      type: object
      properties:
        accessToken:
          type: string
        refreshToken:
          type: string
        tokenType:
          type: string
        expiresIn:
          type: integer
        user:
          $ref: '#/components/schemas/UserResponse'

    # User
    UserResponse:
      type: object
      properties:
        id:
          type: string
        email:
          type: string
        firstName:
          type: string
        lastName:
          type: string
        phone:
          type: string
        role:
          $ref: '#/components/schemas/UserRole'
        isActive:
          type: boolean
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time

    UpdateUserRequest:
      type: object
      properties:
        firstName:
          type: string
        lastName:
          type: string
        phone:
          type: string
        isActive:
          type: boolean

    UserPageResponse:
      allOf:
        - $ref: '#/components/schemas/PageResponse'
        - type: object
          properties:
            content:
              type: array
              items:
                $ref: '#/components/schemas/UserResponse'

    # Recruiter
    RecruiterResponse:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        registrationNumber:
          type: string
        contactEmail:
          type: string
        contactPhone:
          type: string
        website:
          type: string
        description:
          type: string
        verificationStatus:
          $ref: '#/components/schemas/VerificationStatus'
        isActive:
          type: boolean
        createdAt:
          type: string
          format: date-time

    CreateRecruiterRequest:
      type: object
      required: [name, contactEmail, contactPhone]
      properties:
        name:
          type: string
        registrationNumber:
          type: string
        contactEmail:
          type: string
        contactPhone:
          type: string
        website:
          type: string
        description:
          type: string

    UpdateRecruiterRequest:
      type: object
      properties:
        name:
          type: string
        contactEmail:
          type: string
        contactPhone:
          type: string
        website:
          type: string
        description:
          type: string

    RecruiterPageResponse:
      allOf:
        - $ref: '#/components/schemas/PageResponse'
        - type: object
          properties:
            content:
              type: array
              items:
                $ref: '#/components/schemas/RecruiterResponse'

    # Candidate
    CandidateResponse:
      type: object
      properties:
        id:
          type: string
        firstName:
          type: string
        lastName:
          type: string
        email:
          type: string
        phone:
          type: string
        position:
          type: string
        experience:
          type: number
        skills:
          type: array
          items:
            type: string
        resumeUrl:
          type: string
        linkedinUrl:
          type: string
        githubUrl:
          type: string
        status:
          $ref: '#/components/schemas/CandidateStatus'
        createdAt:
          type: string
          format: date-time

    CreateCandidateRequest:
      type: object
      required: [firstName, lastName, email, phone, position]
      properties:
        firstName:
          type: string
        lastName:
          type: string
        email:
          type: string
        phone:
          type: string
        position:
          type: string
        experience:
          type: number
        skills:
          type: array
          items:
            type: string
        resumeUrl:
          type: string
        linkedinUrl:
          type: string
        githubUrl:
          type: string
        recruiterId:
          type: string

    UpdateCandidateRequest:
      type: object
      properties:
        phone:
          type: string
        position:
          type: string
        experience:
          type: number
        skills:
          type: array
          items:
            type: string
        resumeUrl:
          type: string
        linkedinUrl:
          type: string
        githubUrl:
          type: string
        status:
          $ref: '#/components/schemas/CandidateStatus'

    InviteCandidateRequest:
      type: object
      required: [candidateId]
      properties:
        candidateId:
          type: string

    RespondToInvitationRequest:
      type: object
      required: [token, response]
      properties:
        token:
          type: string
        response:
          type: string
          enum: [ACCEPT, DECLINE]

    CandidatePageResponse:
      allOf:
        - $ref: '#/components/schemas/PageResponse'
        - type: object
          properties:
            content:
              type: array
              items:
                $ref: '#/components/schemas/CandidateResponse'

    # Interviewer
    InterviewerResponse:
      type: object
      properties:
        id:
          type: string
        department:
          type: string
        expertise:
          type: array
          items:
            type: string
        yearsOfExperience:
          type: integer
        availability:
          type: boolean
        totalInterviews:
          type: integer
        createdAt:
          type: string
          format: date-time

    CreateInterviewerRequest:
      type: object
      required: [userId, department, expertise]
      properties:
        userId:
          type: string
        department:
          type: string
        expertise:
          type: array
          items:
            type: string
        yearsOfExperience:
          type: integer
        availability:
          type: boolean

    UpdateInterviewerRequest:
      type: object
      properties:
        department:
          type: string
        expertise:
          type: array
          items:
            type: string
        yearsOfExperience:
          type: integer
        availability:
          type: boolean

    InviteInterviewerRequest:
      type: object
      required: [email, recruiterId]
      properties:
        email:
          type: string
        recruiterId:
          type: string
        message:
          type: string

    InterviewerPageResponse:
      allOf:
        - $ref: '#/components/schemas/PageResponse'
        - type: object
          properties:
            content:
              type: array
              items:
                $ref: '#/components/schemas/InterviewerResponse'

    # Interview
    InterviewResponse:
      type: object
      properties:
        id:
          type: string
        recruiterId:
          type: string
        candidate:
          $ref: '#/components/schemas/CandidateResponse'
        scheduledAt:
          type: string
          format: date-time
        duration:
          type: integer
        interviewType:
          $ref: '#/components/schemas/InterviewType'
        round:
          type: integer
        status:
          $ref: '#/components/schemas/InterviewStatus'
        meetingLink:
          type: string
        location:
          type: string
        notes:
          type: string
        candidateConfirmed:
          type: boolean
        result:
          $ref: '#/components/schemas/InterviewResult'
        createdAt:
          type: string
          format: date-time

    ScheduleInterviewRequest:
      type: object
      required: [recruiterId, candidateId, interviewerIds, scheduledAt, interviewType, round]
      properties:
        recruiterId:
          type: string
        candidateId:
          type: string
        interviewerIds:
          type: array
          items:
            type: string
        scheduledAt:
          type: string
          format: date-time
        duration:
          type: integer
        interviewType:
          $ref: '#/components/schemas/InterviewType'
        round:
          type: integer
        meetingLink:
          type: string
        location:
          type: string
        notes:
          type: string

    UpdateInterviewRequest:
      type: object
      properties:
        scheduledAt:
          type: string
          format: date-time
        duration:
          type: integer
        interviewType:
          $ref: '#/components/schemas/InterviewType'
        meetingLink:
          type: string
        notes:
          type: string

    UpdateInterviewStatusRequest:
      type: object
      required: [status]
      properties:
        status:
          $ref: '#/components/schemas/InterviewStatus'
        reason:
          type: string

    ConfirmInterviewRequest:
      type: object
      required: [interviewId, candidateId, confirmed]
      properties:
        interviewId:
          type: string
        candidateId:
          type: string
        confirmed:
          type: boolean
        notes:
          type: string

    MarkInterviewResultRequest:
      type: object
      required: [interviewId, result]
      properties:
        interviewId:
          type: string
        result:
          $ref: '#/components/schemas/InterviewResult'
        comments:
          type: string

    CreateNextRoundInterviewRequest:
      type: object
      required: [previousInterviewId, scheduledAt, interviewType]
      properties:
        previousInterviewId:
          type: string
        scheduledAt:
          type: string
          format: date-time
        duration:
          type: integer
        interviewType:
          $ref: '#/components/schemas/InterviewType'
        interviewerIds:
          type: array
          items:
            type: string
        meetingLink:
          type: string
        location:
          type: string
        notes:
          type: string

    InterviewPageResponse:
      allOf:
        - $ref: '#/components/schemas/PageResponse'
        - type: object
          properties:
            content:
              type: array
              items:
                $ref: '#/components/schemas/InterviewResponse'

    # Feedback
    FeedbackResponse:
      type: object
      properties:
        id:
          type: string
        interviewId:
          type: string
        rating:
          type: integer
        technicalSkills:
          type: integer
        communicationSkills:
          type: integer
        problemSolving:
          type: integer
        culturalFit:
          type: integer
        strengths:
          type: string
        weaknesses:
          type: string
        comments:
          type: string
        recommendation:
          $ref: '#/components/schemas/FeedbackRecommendation'
        createdAt:
          type: string
          format: date-time

    SubmitFeedbackRequest:
      type: object
      required: [interviewId]
      properties:
        interviewId:
          type: string
        rating:
          type: integer
          minimum: 1
          maximum: 10
        technicalSkills:
          type: integer
          minimum: 1
          maximum: 10
        communicationSkills:
          type: integer
          minimum: 1
          maximum: 10
        problemSolving:
          type: integer
          minimum: 1
          maximum: 10
        culturalFit:
          type: integer
          minimum: 1
          maximum: 10
        strengths:
          type: string
        weaknesses:
          type: string
        comments:
          type: string
        recommendation:
          $ref: '#/components/schemas/FeedbackRecommendation'

    UpdateFeedbackRequest:
      type: object
      properties:
        rating:
          type: integer
        technicalSkills:
          type: integer
        communicationSkills:
          type: integer
        problemSolving:
          type: integer
        culturalFit:
          type: integer
        strengths:
          type: string
        weaknesses:
          type: string
        comments:
          type: string
        recommendation:
          $ref: '#/components/schemas/FeedbackRecommendation'

    FeedbackPageResponse:
      allOf:
        - $ref: '#/components/schemas/PageResponse'
        - type: object
          properties:
            content:
              type: array
              items:
                $ref: '#/components/schemas/FeedbackResponse'

    # Dashboards
    AdminDashboardResponse:
      type: object
      properties:
        stats:
          type: object
          properties:
            totalRecruiters:
              type: integer
            verifiedRecruiters:
              type: integer
            pendingRecruiters:
              type: integer
            totalUsers:
              type: integer
            totalInterviews:
              type: integer
            totalCandidates:
              type: integer
            activeInterviews:
              type: integer

    RecruiterDashboardResponse:
      type: object
      properties:
        stats:
          type: object
          properties:
            totalCandidates:
              type: integer
            activeCandidates:
              type: integer
            totalInterviews:
              type: integer
            upcomingInterviews:
              type: integer
            completedInterviews:
              type: integer
            totalInterviewers:
              type: integer
            pendingFeedbacks:
              type: integer

    InterviewerDashboardResponse:
      type: object
      properties:
        stats:
          type: object
          properties:
            totalInterviews:
              type: integer
            upcomingInterviews:
              type: integer
            completedInterviews:
              type: integer
            pendingFeedbacks:
              type: integer
            availability:
              type: boolean

    CandidateDashboardResponse:
      type: object
      properties:
        stats:
          type: object
          properties:
            totalInterviews:
              type: integer
            upcomingInterviews:
              type: integer
            completedInterviews:
              type: integer
            pendingConfirmations:
              type: integer
            currentStatus:
              type: string

